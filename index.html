<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BookReader - ·ª®ng d·ª•ng ƒë·ªçc s√°ch di ƒë·ªông</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Sidebar Menu -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header" id="sidebar-header">
            <h2>M·ª•c l·ª•c</h2>
            <div class="sidebar-controls">
                <!-- N√∫t admin s·∫Ω ƒë∆∞·ª£c th√™m v√†o ƒë√¢y -->
                <button class="sidebar-settings-btn" id="sidebar-settings-btn">‚öôÔ∏è</button>
                <button class="close-menu-btn" id="close-menu-btn">‚úï</button>
            </div>
        </div>

        <!-- Th√™m ph·∫ßn admin controls - CH·ªà 1 PH·∫¶N -->
        <div class="documents-admin-controls admin-only" style="display: none;">
            <div class="admin-controls-header">
                <h4>Qu·∫£n l√Ω b√†i vi·∫øt</h4>
                <button id="exit-admin-mode" class="admin-btn secondary">Tho√°t</button>
            </div>
            <div class="admin-controls-buttons">
                <button id="add-new-doc" class="admin-btn">‚ûï Th√™m m·ªõi</button>
                <button id="save-changes" class="admin-btn primary">üíæ L∆∞u thay ƒë·ªïi</button>
            </div>
        </div>
        
        <!-- Navigation khi ƒëang ƒë·ªçc -->
        <div class="sidebar-nav" id="sidebar-nav" style="display: none;">
            <button class="back-btn" id="back-btn">‚Üê Quay l·∫°i</button>
            <span class="page-title" id="page-title">M·ª•c l·ª•c</span>
        </div>
        
        <div class="sidebar-content">
            <!-- T√¨m ki·∫øm t√†i li·ªáu (ch·ªâ hi·ªán khi ch∆∞a ƒë·ªçc) -->
            <div class="documents-search-container" id="documents-search-container">
                <input type="text" id="documents-search" placeholder="üîç T√¨m t√†i li·ªáu..." class="documents-search-input">
                <div class="documents-search-results" id="documents-search-results"></div>
            </div>

            <!-- Danh s√°ch t√†i li·ªáu (ch·ªâ hi·ªán khi ch∆∞a ƒë·ªçc) -->
            <div class="documents-section" id="documents-section">
                <h3>üìö T√†i li·ªáu c√≥ s·∫µn</h3>
                <div class="documents-list" id="documents-list">
                    <div class="document-placeholder">ƒêang t·∫£i danh s√°ch...</div>
                </div>
            </div>

            <!-- T√¨m ki·∫øm m·ª•c l·ª•c (ch·ªâ hi·ªán khi ƒëang ƒë·ªçc) -->
            <div class="toc-search-container" id="toc-search-container" style="display: none;">
                <input type="text" id="toc-search" placeholder="üîç T√¨m ki·∫øm m·ª•c l·ª•c..." class="toc-search-input">
                <div class="toc-search-results" id="toc-search-results"></div>
            </div>

            <!-- M·ª•c l·ª•c (ch·ªâ hi·ªán khi ƒëang ƒë·ªçc) -->
            <div class="toc-section" id="toc-section" style="display: none;">
                <div class="toc-container">
                    <ul id="toc-list">
                        <li class="toc-placeholder">Ch·ªçn t√†i li·ªáu ƒë·ªÉ xem m·ª•c l·ª•c</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content Area -->
    <div class="main-wrapper" id="main-wrapper">
        <!-- Compact Header -->
        <header class="reader-header">
            <div class="header-left">
                <button class="menu-toggle-btn" id="menu-toggle-btn" title="Menu">
                    <span class="menu-icon">‚ò∞</span>
                </button>
                <span class="book-title" id="book-title">BookReader</span>
            </div>
            
            <div class="header-right">
                <div class="page-indicator" id="page-indicator">
                    <span id="current-page">-</span>/<span id="total-pages">-</span>
                </div>
                <button class="settings-btn" id="settings-btn" title="C√†i ƒë·∫∑t">
                    <span class="settings-icon">‚öôÔ∏è</span>
                </button>
            </div>
        </header>

        <!-- Reader Content -->
        <main class="content-reader" id="content-reader">
            <div class="placeholder-content" id="placeholder-content">
                <div class="welcome-icon">üìö</div>
                <h2>Ch√†o m·ª´ng ƒë·∫øn v·ªõi BookReader</h2>
                <p>·ª®ng d·ª•ng ƒë·ªçc s√°ch di ƒë·ªông chuy√™n nghi·ªáp</p>
                <div class="welcome-features">
                    <div class="feature">
                        <span class="feature-icon">üì±</span>
                        <span>T·ªëi ∆∞u cho ƒëi·ªán tho·∫°i</span>
                    </div>
                    <div class="feature">
                        <span class="feature-icon">üëÜ</span>
                        <span>Vu·ªët ƒë·ªÉ chuy·ªÉn trang</span>
                    </div>
                    <div class="feature">
                        <span class="feature-icon">üé®</span>
                        <span>Ch·ªß ƒë·ªÅ ƒë·ªçc t√πy ch·ªânh</span>
                    </div>
                    <div class="feature">
                        <span class="feature-icon">üåê</span>
                        <span>T·∫£i t·ª´ GitHub</span>
                    </div>
                </div>
                <button class="get-started-btn" id="get-started-btn">
                    B·∫Øt ƒë·∫ßu ƒë·ªçc ngay
                </button>
            </div>
            
            <div id="file-content-display" class="file-content" style="display:none;"></div>
        </main>

        <!-- Progress Bar -->
        <footer class="reader-footer">
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
        </footer>
    </div>

   <!-- Settings Panel -->
<div class="settings-panel" id="settings-panel"> <!-- ƒê√É X√ìA CLASS ACTIVE -->
    <div class="settings-header">
        <h3>C√†i ƒë·∫∑t ƒë·ªçc</h3>
        <button class="close-settings-btn" id="close-settings-btn">‚úï</button>
    </div>
    <div class="settings-content">
        <div class="setting-item">
            <label for="font-size">C·ª° ch·ªØ:</label>
            <select id="font-size">
                <option value="0.9">Nh·ªè</option>
                <option value="1" selected>V·ª´a</option>
                <option value="1.1">L·ªõn</option>
                <option value="1.2">R·∫•t l·ªõn</option>
            </select>
        </div>
        
        <div class="setting-item">
            <label for="theme">Ch·ªß ƒë·ªÅ:</label>
            <select id="theme">
                <option value="light" selected>S√°ng</option>
                <option value="sepia">Sepia</option>
                <option value="dark">T·ªëi</option>
            </select>
        </div>
        
        <!-- GitHub Configuration Section - CH·ªà cho admin -->
        <div class="github-section admin-only" id="github-section" style="display: none;">
            <h4>üìÇ C·∫•u h√¨nh GitHub</h4>
            <div id="gh-config-section">
                <div class="form-group">
                    <label for="gh-owner">GitHub Owner:</label>
                    <input type="text" id="gh-owner" placeholder="username" value="Datkep92">
                </div>
                <div class="form-group">
                    <label for="gh-repo">GitHub Repo:</label>
                    <input type="text" id="gh-repo" placeholder="repository-name" value="aquyet">
                </div>
                <div class="form-group">
                    <label for="gh-base-path">Base Path:</label>
                    <input type="text" id="gh-base-path" placeholder="folder-name" value="docs/Quyet">
                </div>
                <div class="form-group">
                    <label for="gh-token">Token (t√πy ch·ªçn):</label>
                    <input type="password" id="gh-token" placeholder="ghp_xxx">
                </div>
            </div>
            <div class="github-buttons">
                <button type="button" class="github-btn" id="save-config-btn">
                    üíæ L∆∞u c·∫•u h√¨nh
                </button>
                <button type="button" class="github-btn primary" id="load-from-github-btn">
                    üåê T·∫£i t·ª´ GitHub
                </button>
                <button type="button" class="github-btn secondary" id="reconfigure-github-btn" style="display:none;">
                    ‚öôÔ∏è C·∫•u h√¨nh l·∫°i GitHub
                </button>
            </div>
        </div>

        <!-- Admin Login Section - LU√îN hi·ªÉn th·ªã cho m·ªçi ng∆∞·ªùi -->
        <div class="admin-login-section" id="admin-login-section">
            <h4>üë®‚Äçüíº Qu·∫£n tr·ªã</h4>
            <div class="admin-buttons">
                <button type="button" class="admin-btn" id="admin-login-btn">
                    üîë ƒêƒÉng nh·∫≠p Admin
                </button>
            </div>
        </div>

        <!-- Admin Panel Section - CH·ªà hi·ªÉn th·ªã khi ƒë√£ ƒëƒÉng nh·∫≠p -->
        <div class="admin-section admin-only" id="admin-section" style="display: none;">
            <h4>üë®‚Äçüíº Qu·∫£n tr·ªã vi√™n</h4>
            <div class="admin-buttons">
                <button type="button" class="admin-btn logout" id="admin-logout-btn">
                    üö™ ƒêƒÉng xu·∫•t
                </button>
            </div>

            <!-- Upload Section -->
            <div class="upload-section" id="upload-section">
                <h5>üì§ Upload t√†i li·ªáu m·ªõi</h5>
                <div class="form-group">
                    <label for="author-name">T√°c gi·∫£:</label>
                    <input type="text" id="author-name" placeholder="T√™n t√°c gi·∫£">
                </div>
                <div class="form-group">
                    <label for="book-title-input">Ti√™u ƒë·ªÅ:</label>
                    <input type="text" id="book-title-input" placeholder="Ti√™u ƒë·ªÅ s√°ch">
                </div>
                <div class="form-group">
                    <label for="book-description">Mi√™u t·∫£ ng·∫Øn:</label>
                    <textarea id="book-description" placeholder="Nh·∫≠p mi√™u t·∫£ ng·∫Øn v·ªÅ s√°ch..." rows="3" style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: var(--radius); background: var(--bg-primary); color: var(--text-primary); font-size: 0.85rem; resize: vertical;"></textarea>
                </div>
                <div class="form-group">
                    <label for="file-input">File HTML:</label>
                    <input type="file" id="file-input" accept=".html,.htm">
                </div>
                <div id="upload-preview" style="margin-top:8px;padding:8px;border-radius:6px;background:var(--bg-primary);border:1px solid var(--border-color);display:none;font-size:0.9rem;color:var(--text-secondary)"></div>
                <button type="button" class="upload-btn" id="upload-btn">
                    üì§ Upload l√™n GitHub
                </button>
            </div>

            <div class="stats-section">
                <h5>üìä Th·ªëng k√™ truy c·∫≠p (LOCAL)</h5>
                <p style="font-size: 12px; color: #666; margin-bottom: 10px;">
                    üí° ch∆∞a Buid
                </p>
                <div class="admin-stats" id="admin-stats">
                    <!-- Stats will be loaded here -->
                </div>
            </div>

            <!-- User Management -->
            <div class="user-management-section" id="user-management-section">
                <h5>üë• Qu·∫£n l√Ω User</h5>
                <button type="button" class="admin-btn" id="grant-admin-btn">
                    üìã Danh s√°ch User
                </button>
                <div class="users-list" id="users-list" style="margin-top: 15px; display: none;">
                    <!-- Users will be loaded here -->
                </div>
            </div>
        </div>
    </div>
</div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay">
        <div class="loading-spinner"></div>
        <p>ƒêang t·∫£i s√°ch...</p>
    </div>

    <script src="auth.js"></script>
    <script src="sidebar.js"></script>
    <script src="github-manager.js"></script>
    <script src="file-manager.js"></script>
    <script src="app.js"></script>
</body>
</html>